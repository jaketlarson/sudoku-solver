(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.SudokuSolver=function(){function e(){this.enablePuzzle=t(this.enablePuzzle,this),this.disablePuzzle=t(this.disablePuzzle,this),this.resetInputAfterFlash=t(this.resetInputAfterFlash,this),this.handleSuccess=t(this.handleSuccess,this),this.handleConnectionError=t(this.handleConnectionError,this),this.handleInvalid=t(this.handleInvalid,this),this.hideErrors=t(this.hideErrors,this),this.submitPuzzle=t(this.submitPuzzle,this),this.updateSize=t(this.updateSize,this),this.initListeners=t(this.initListeners,this),this.buildPuzzleInterface=t(this.buildPuzzleInterface,this),this.initEnv=t(this.initEnv,this),this.initEnv(),this.buildPuzzleInterface(),this.initListeners(),this.updateSize()}return e.prototype.initEnv=function(){return this.solver_path="http://sudoku-solver-mdl.herokuapp.com/solver/call_solver.php",this.$puzzle_interface=$("#puzzle-interface"),this.$sudoku_submit_form=$("form#sudoku-submit"),this.$error_connection=$("#error-connection"),this.$error_invalid=$("#error-invalid"),this.rows=9,this.cols=9},e.prototype.buildPuzzleInterface=function(){var t,e,i,n,r,s,u;for(u=[],e=i=1,r=this.rows;r>=1?r>=i:i>=r;e=r>=1?++i:--i){for(console.log(e),t=$("<div />").attr("class","puzzle-row"),e=n=1,s=this.cols;s>=1?s>=n:n>=s;e=s>=1?++n:--n)t.append("<input type='text' maxlength='1'>");u.push(this.$puzzle_interface.append(t))}return u},e.prototype.initListeners=function(){var t=this;return this.$puzzle_interface.find("input").keyup(function(e){var i,n,r;return i=$(e.currentTarget),r=parseInt(i.val()),r>=1&&9>=r&&(n=t.$puzzle_interface.find("input").index(i),n!==t.$puzzle_interface.find("input").length-1)?t.$puzzle_interface.find("input")[n+1].focus():void 0}),$(window).resize(function(){return t.updateSize()}),this.$sudoku_submit_form.submit(function(e){return e.preventDefault(),t.submitPuzzle()})},e.prototype.updateSize=function(){var t;return t=this.$puzzle_interface.find("input").width(),this.$puzzle_interface.find("input").height(t),console.log(t)},e.prototype.submitPuzzle=function(){var t,e=this;return this.hideErrors(),this.disablePuzzle(),t=[],$.each(this.$puzzle_interface.find("input"),function(e,i){var n;return n=parseInt($(i).val()),n>=1&&9>=n?t.push(n):t.push(0)}),console.log(t.length),$.ajax({type:"GET",url:""+this.solver_path+"?puzzle="+t.join(" "),success:function(t){return e.enablePuzzle(),"invalid"===t?e.handleInvalid():e.handleSuccess(t)},error:function(){return e.enablePuzzle(),e.handleConnectionError()}})},e.prototype.hideErrors=function(){return this.$error_invalid.hide(),this.$error_connection.hide()},e.prototype.handleInvalid=function(){return this.$error_invalid.show(),this.$puzzle_interface.find("input").addClass("error-flash"),this.resetInputAfterFlash()},e.prototype.handleConnectionError=function(){return this.$error_connection.show()},e.prototype.handleSuccess=function(t){var e,i=this;return e=t.split(" "),$.each(e,function(t,e){return $(i.$puzzle_interface.find("input")[t]).val(e).addClass("success-flash")}),this.resetInputAfterFlash()},e.prototype.resetInputAfterFlash=function(){var t=this;return setTimeout(function(){return t.$puzzle_interface.find("input").removeClass("success-flash").removeClass("error-flash")},500)},e.prototype.disablePuzzle=function(){return this.$puzzle_interface.find("input").prop("disabled",!0)},e.prototype.enablePuzzle=function(){return this.$puzzle_interface.find("input").prop("disabled",!1)},e}(),$(function(){var t;return t=new window.SudokuSolver})}).call(this);