(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};window.SudokuSolver=function(){function i(){this.reset=t(this.reset,this),this.enable=t(this.enable,this),this.disable=t(this.disable,this),this.resetInputAfterFlash=t(this.resetInputAfterFlash,this),this.handleSuccess=t(this.handleSuccess,this),this.handleConnectionError=t(this.handleConnectionError,this),this.handleInvalid=t(this.handleInvalid,this),this.hideErrors=t(this.hideErrors,this),this.submitPuzzle=t(this.submitPuzzle,this),this.updateSize=t(this.updateSize,this),this.initListeners=t(this.initListeners,this),this.buildPuzzleInterface=t(this.buildPuzzleInterface,this),this.initEnv=t(this.initEnv,this),this.initEnv(),this.buildPuzzleInterface(),this.initListeners(),this.updateSize()}return i.prototype.initEnv=function(){return this.solver_path="http://sudoku-solver-mdl.herokuapp.com/solver/call_solver.php",this.$puzzle_interface=$("#puzzle-interface"),this.$sudoku_submit_form=$("form#sudoku-submit"),this.$sudoku_reset_button=$("a#puzzle-reset"),this.$error_connection=$("#error-connection"),this.$error_invalid=$("#error-invalid"),this.rows=9,this.cols=9,this.xhr_waiting=!1},i.prototype.buildPuzzleInterface=function(){var t,i,e,n,r,s,u;for(u=[],i=e=1,r=this.rows;r>=1?r>=e:e>=r;i=r>=1?++e:--e){for(console.log(i),t=$("<div />").attr("class","puzzle-row"),i=n=1,s=this.cols;s>=1?s>=n:n>=s;i=s>=1?++n:--n)t.append("<input type='text' maxlength='1'>");u.push(this.$puzzle_interface.append(t))}return u},i.prototype.initListeners=function(){var t=this;return $(window).resize(function(){return t.updateSize()}),this.$sudoku_submit_form.submit(function(i){return i.preventDefault(),t.submitPuzzle()}),this.$sudoku_reset_button.click(function(){return t.reset()})},i.prototype.updateSize=function(){var t;return t=this.$puzzle_interface.find("input").width(),this.$puzzle_interface.find("input").height(t),console.log(t)},i.prototype.submitPuzzle=function(){var t,i=this;if(!this.xhr_waiting)return console.log("submitting"),this.hideErrors(),this.disable(),t=[],$.each(this.$puzzle_interface.find("input"),function(i,e){var n;return n=parseInt($(e).val()),n>=1&&9>=n?t.push(n):t.push(0)}),this.xhr_waiting=!0,$.ajax({type:"GET",url:""+this.solver_path+"?puzzle="+t.join(" "),success:function(t){return i.xhr_waiting=!1,i.enable(),"invalid"===t?i.handleInvalid():i.handleSuccess(t)},error:function(){return i.xhr_waiting=!1,i.enable(),i.handleConnectionError()}})},i.prototype.hideErrors=function(){return this.$error_invalid.hide(),this.$error_connection.hide()},i.prototype.handleInvalid=function(){return this.$error_invalid.show(),this.$puzzle_interface.find("input").addClass("error-flash"),this.resetInputAfterFlash()},i.prototype.handleConnectionError=function(){return this.$error_connection.show()},i.prototype.handleSuccess=function(t){var i,e=this;return i=t.split(" "),$.each(i,function(t,i){return $(e.$puzzle_interface.find("input")[t]).val(i).addClass("success-flash")}),this.resetInputAfterFlash()},i.prototype.resetInputAfterFlash=function(){var t=this;return setTimeout(function(){return t.$puzzle_interface.find("input").removeClass("success-flash").removeClass("error-flash")},500)},i.prototype.disable=function(){return this.$puzzle_interface.find("input").prop("disabled",!0),this.$sudoku_submit_form.find("button").prop("disabled",!0),this.$sudoku_reset_button.addClass("mdl-button--disabled")},i.prototype.enable=function(){return this.$puzzle_interface.find("input").prop("disabled",!1),this.$sudoku_submit_form.find("button").prop("disabled",!1),this.$sudoku_reset_button.removeClass("mdl-button--disabled")},i.prototype.reset=function(){return this.xhr_waiting?void 0:this.$puzzle_interface.find("input").val("")},i}(),$(function(){var t;return t=new window.SudokuSolver})}).call(this);